{"ast":null,"code":"import { inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { firstValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst _c0 = [\"uploadFile\"];\nconst _c1 = [\"imagePath\"];\nclass AppComponent {\n  constructor() {\n    this.fb = inject(FormBuilder);\n    this.uploadSvc = inject(UploadService);\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      title: this.fb.control('', [Validators.required]),\n      file: this.fb.control(null, [Validators.required])\n    });\n  }\n  upload() {\n    const f = this.uploadFile.nativeElement.files[0];\n    const data = this.form.value;\n    console.info('data: ', data);\n    console.info('file: ', f);\n    firstValueFrom(this.uploadSvc.upload(data['title'], f)).then(result => {\n      alert('uploaded');\n      this.form.reset();\n    }).catch(err => {\n      alert(JSON.stringify(err));\n    });\n  }\n  getImage() {\n    const path = this.imagePath.nativeElement.value;\n    this.image$ = this.uploadSvc.getImage(path);\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)();\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  viewQuery: function AppComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.uploadFile = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imagePath = _t.first);\n    }\n  },\n  decls: 20,\n  vars: 2,\n  consts: [[3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"size\", \"30\", \"formControlName\", \"title\"], [\"type\", \"file\", \"formControlName\", \"file\"], [\"uploadFile\", \"\"], [\"type\", \"submit\", 3, \"disabled\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Upload\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function AppComponent_Template_form_submit_2_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵelementStart(3, \"table\")(4, \"tr\")(5, \"td\");\n      i0.ɵɵtext(6, \"Title:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"td\");\n      i0.ɵɵelement(8, \"input\", 1);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"tr\")(10, \"td\");\n      i0.ɵɵtext(11, \"File:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"td\");\n      i0.ɵɵelement(13, \"input\", 2, 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"tr\");\n      i0.ɵɵelement(16, \"td\");\n      i0.ɵɵelementStart(17, \"td\")(18, \"button\", 4);\n      i0.ɵɵtext(19, \"Upload\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { AppComponent };","map":{"version":3,"names":["inject","FormBuilder","Validators","UploadService","firstValueFrom","AppComponent","constructor","fb","uploadSvc","ngOnInit","form","group","title","control","required","file","upload","f","uploadFile","nativeElement","files","data","value","console","info","then","result","alert","reset","catch","err","JSON","stringify","getImage","path","imagePath","image$","selectors","viewQuery","AppComponent_Query","rf","ctx","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AppComponent_Template_form_submit_2_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","invalid"],"sources":["C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\app.component.ts","C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\app.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { firstValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  @ViewChild('uploadFile')\n  uploadFile!: ElementRef\n  @ViewChild('imagePath')\n  imagePath!: ElementRef\n\n\n  image$!: Observable<any>\n  form!: FormGroup\n  fb = inject(FormBuilder)\n  uploadSvc = inject(UploadService)\n\n  ngOnInit(): void {\n      this.form = this.fb.group({\n        title: this.fb.control<string>('', [Validators.required]),\n        file: this.fb.control<File | null>(null, [Validators.required])\n      })\n  }\n\n  upload() {\n    const f: File = this.uploadFile.nativeElement.files[0]\n    const data = this.form.value\n    console.info('data: ', data)\n    console.info('file: ', f)\n\n    firstValueFrom(this.uploadSvc.upload(data['title'], f))\n    .then(result => {\n      alert('uploaded')\n      this.form.reset()\n    })\n    .catch(err => {\n      alert(JSON.stringify(err))\n    })\n  }\n\n  getImage() {\n    const path = this.imagePath.nativeElement.value\n    this.image$ = this.uploadSvc.getImage(path);\n\n  }\n}\n","<h1>Upload</h1>\n\n<form [formGroup]=\"form\" (submit)=\"upload()\">\n  <table>\n    <tr>\n      <td>Title:</td>\n      <td>\n        <input type=\"text\" size=\"30\" formControlName=\"title\">\n      </td>\n    </tr>\n    <tr>\n      <td>File:</td>\n      <td>\n        <input type=\"file\" formControlName=\"file\" #uploadFile>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        <button type=\"submit\" [disabled]=\"form.invalid\">Upload</button>\n      </td>\n    </tr>\n  </table>\n</form>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}