{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { firstValueFrom } from 'rxjs';\nlet AppComponent = class AppComponent {\n  constructor() {\n    this.filename = \"image_file\";\n    this.image = '';\n    this.fb = inject(FormBuilder);\n    this.uploadSvc = inject(UploadService);\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      title: this.fb.control('', [Validators.required]),\n      file: this.fb.control(null, [Validators.required])\n    });\n  }\n  upload() {\n    const f = this.uploadFile.nativeElement.files[0];\n    const data = this.form.value;\n    console.info('data: ', data);\n    console.info('file: ', f);\n    firstValueFrom(this.uploadSvc.upload(data['title'], f)).then(result => {\n      alert('uploaded');\n      this.form.reset();\n    }).catch(err => {\n      alert(JSON.stringify(err));\n    });\n  }\n  getImage() {\n    const key = this.imageKey.nativeElement.value;\n    this.image$ = this.uploadSvc.getImage(key);\n    this.image$.subscribe(value => {\n      this.image = value;\n    });\n  }\n};\n__decorate([ViewChild('uploadFile')], AppComponent.prototype, \"uploadFile\", void 0);\n__decorate([ViewChild('imageKey')], AppComponent.prototype, \"imageKey\", void 0);\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})], AppComponent);\nexport { AppComponent };","map":{"version":3,"names":["Component","ViewChild","inject","FormBuilder","Validators","UploadService","firstValueFrom","AppComponent","constructor","filename","image","fb","uploadSvc","ngOnInit","form","group","title","control","required","file","upload","f","uploadFile","nativeElement","files","data","value","console","info","then","result","alert","reset","catch","err","JSON","stringify","getImage","key","imageKey","image$","subscribe","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { Observable, firstValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  @ViewChild('uploadFile')\n  uploadFile!: ElementRef\n  @ViewChild('imageKey')\n  imageKey!: ElementRef\n\n  filename = \"image_file\"\n  image = ''\n  image$!: Observable<any>\n  form!: FormGroup\n  fb = inject(FormBuilder)\n  uploadSvc = inject(UploadService)\n\n  ngOnInit(): void {\n      this.form = this.fb.group({\n        title: this.fb.control<string>('', [Validators.required]),\n        file: this.fb.control<File | null>(null, [Validators.required])\n      })\n  }\n\n  upload() {\n    const f: File = this.uploadFile.nativeElement.files[0]\n    const data = this.form.value\n    console.info('data: ', data)\n    console.info('file: ', f)\n\n    firstValueFrom(this.uploadSvc.upload(data['title'], f))\n    .then(result => {\n      alert('uploaded')\n      this.form.reset()\n    })\n    .catch(err => {\n      alert(JSON.stringify(err))\n    })\n  }\n\n  getImage() {\n    const key = this.imageKey.nativeElement.value\n    this.image$ = this.uploadSvc.getImage(key);\n    this.image$.subscribe(\n      value => {\n        this.image = value;\n      }\n      \n    )\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAsBC,SAAS,EAAEC,MAAM,QAAQ,eAAe;AAChF,SAASC,WAAW,EAAaC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAAqBC,cAAc,QAAQ,MAAM;AAOjD,IAAaC,YAAY,GAAzB,MAAaA,YAAY;EAAzBC,YAAA;IAME,KAAAC,QAAQ,GAAG,YAAY;IACvB,KAAAC,KAAK,GAAG,EAAE;IAGV,KAAAC,EAAE,GAAGT,MAAM,CAACC,WAAW,CAAC;IACxB,KAAAS,SAAS,GAAGV,MAAM,CAACG,aAAa,CAAC;EAmCnC;EAjCEQ,QAAQA,CAAA;IACJ,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,IAAI,CAACL,EAAE,CAACM,OAAO,CAAS,EAAE,EAAE,CAACb,UAAU,CAACc,QAAQ,CAAC,CAAC;MACzDC,IAAI,EAAE,IAAI,CAACR,EAAE,CAACM,OAAO,CAAc,IAAI,EAAE,CAACb,UAAU,CAACc,QAAQ,CAAC;KAC/D,CAAC;EACN;EAEAE,MAAMA,CAAA;IACJ,MAAMC,CAAC,GAAS,IAAI,CAACC,UAAU,CAACC,aAAa,CAACC,KAAK,CAAC,CAAC,CAAC;IACtD,MAAMC,IAAI,GAAG,IAAI,CAACX,IAAI,CAACY,KAAK;IAC5BC,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEH,IAAI,CAAC;IAC5BE,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEP,CAAC,CAAC;IAEzBf,cAAc,CAAC,IAAI,CAACM,SAAS,CAACQ,MAAM,CAACK,IAAI,CAAC,OAAO,CAAC,EAAEJ,CAAC,CAAC,CAAC,CACtDQ,IAAI,CAACC,MAAM,IAAG;MACbC,KAAK,CAAC,UAAU,CAAC;MACjB,IAAI,CAACjB,IAAI,CAACkB,KAAK,EAAE;IACnB,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAG;MACXH,KAAK,CAACI,IAAI,CAACC,SAAS,CAACF,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAG,QAAQA,CAAA;IACN,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAAChB,aAAa,CAACG,KAAK;IAC7C,IAAI,CAACc,MAAM,GAAG,IAAI,CAAC5B,SAAS,CAACyB,QAAQ,CAACC,GAAG,CAAC;IAC1C,IAAI,CAACE,MAAM,CAACC,SAAS,CACnBf,KAAK,IAAG;MACN,IAAI,CAAChB,KAAK,GAAGgB,KAAK;IACpB,CAAC,CAEF;EACH;CACD;AA5CCgB,UAAA,EADCzC,SAAS,CAAC,YAAY,CAAC,C,+CACD;AAEvByC,UAAA,EADCzC,SAAS,CAAC,UAAU,CAAC,C,6CACD;AAJVM,YAAY,GAAAmC,UAAA,EALxB1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,sBAAsB;EACnCC,SAAS,EAAE,CAAC,qBAAqB;CAClC,CAAC,C,EACWtC,YAAY,CA8CxB;SA9CYA,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}