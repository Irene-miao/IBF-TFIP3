{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { firstValueFrom } from 'rxjs';\nlet AppComponent = class AppComponent {\n  constructor() {\n    this.fb = inject(FormBuilder);\n    this.uploadSvc = inject(UploadService);\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      title: this.fb.control('', [Validators.required]),\n      file: this.fb.control(null, [Validators.required])\n    });\n  }\n  upload() {\n    const f = this.uploadFile.nativeElement.files[0];\n    const data = this.form.value;\n    console.info('data: ', data);\n    console.info('file: ', f);\n    firstValueFrom(this.uploadSvc.upload(data['title'], f)).then(result => {\n      alert('uploaded');\n      this.form.reset();\n    }).catch(err => {\n      alert(JSON.stringify(err));\n    });\n  }\n  getImage() {\n    const key = this.imageKey.nativeElement.value;\n    this.uploadSvc.getImage(key).subscribe(value => {\n      this.createImage(value);\n    });\n  }\n  createImage(image) {\n    if (image && image.size > 0) {\n      let reader = new FileReader();\n      reader.onload = e => this.picture = e.target?.result;\n      reader.readAsDataURL(image);\n    }\n  }\n};\n__decorate([ViewChild('uploadFile')], AppComponent.prototype, \"uploadFile\", void 0);\n__decorate([ViewChild('imageKey')], AppComponent.prototype, \"imageKey\", void 0);\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})], AppComponent);\nexport { AppComponent };","map":{"version":3,"names":["Component","ViewChild","inject","FormBuilder","Validators","UploadService","firstValueFrom","AppComponent","constructor","fb","uploadSvc","ngOnInit","form","group","title","control","required","file","upload","f","uploadFile","nativeElement","files","data","value","console","info","then","result","alert","reset","catch","err","JSON","stringify","getImage","key","imageKey","subscribe","createImage","image","size","reader","FileReader","onload","e","picture","target","readAsDataURL","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { Observable, firstValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  @ViewChild('uploadFile')\n  uploadFile!: ElementRef\n  @ViewChild('imageKey')\n  imageKey!: ElementRef\n\n \n  picture: string | ArrayBuffer | null | undefined\n \n  form!: FormGroup\n  fb = inject(FormBuilder)\n  uploadSvc = inject(UploadService)\n\n  ngOnInit(): void {\n      this.form = this.fb.group({\n        title: this.fb.control<string>('', [Validators.required]),\n        file: this.fb.control<File | null>(null, [Validators.required])\n      })\n  }\n\n  upload() {\n    const f: File = this.uploadFile.nativeElement.files[0]\n    const data = this.form.value\n    console.info('data: ', data)\n    console.info('file: ', f)\n\n    firstValueFrom(this.uploadSvc.upload(data['title'], f))\n    .then(result => {\n      alert('uploaded')\n      this.form.reset()\n    })\n    .catch(err => {\n      alert(JSON.stringify(err))\n    })\n  }\n\n  getImage() {\n    const key = this.imageKey.nativeElement.value\n    this.uploadSvc.getImage(key).subscribe(\n      value => {\n        this.createImage(value);\n      }\n      \n    )\n  }\n\n  private createImage(image: Blob) {\n    if (image && image.size > 0) {\n      let reader = new FileReader();\n      reader.onload = (e) => this.picture = e.target?.result;\n      reader.readAsDataURL(image);\n    }\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAsBC,SAAS,EAAEC,MAAM,QAAQ,eAAe;AAChF,SAASC,WAAW,EAAaC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAAqBC,cAAc,QAAQ,MAAM;AAOjD,IAAaC,YAAY,GAAzB,MAAaA,YAAY;EAAzBC,YAAA;IAUE,KAAAC,EAAE,GAAGP,MAAM,CAACC,WAAW,CAAC;IACxB,KAAAO,SAAS,GAAGR,MAAM,CAACG,aAAa,CAAC;EA0CnC;EAxCEM,QAAQA,CAAA;IACJ,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,IAAI,CAACL,EAAE,CAACM,OAAO,CAAS,EAAE,EAAE,CAACX,UAAU,CAACY,QAAQ,CAAC,CAAC;MACzDC,IAAI,EAAE,IAAI,CAACR,EAAE,CAACM,OAAO,CAAc,IAAI,EAAE,CAACX,UAAU,CAACY,QAAQ,CAAC;KAC/D,CAAC;EACN;EAEAE,MAAMA,CAAA;IACJ,MAAMC,CAAC,GAAS,IAAI,CAACC,UAAU,CAACC,aAAa,CAACC,KAAK,CAAC,CAAC,CAAC;IACtD,MAAMC,IAAI,GAAG,IAAI,CAACX,IAAI,CAACY,KAAK;IAC5BC,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEH,IAAI,CAAC;IAC5BE,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEP,CAAC,CAAC;IAEzBb,cAAc,CAAC,IAAI,CAACI,SAAS,CAACQ,MAAM,CAACK,IAAI,CAAC,OAAO,CAAC,EAAEJ,CAAC,CAAC,CAAC,CACtDQ,IAAI,CAACC,MAAM,IAAG;MACbC,KAAK,CAAC,UAAU,CAAC;MACjB,IAAI,CAACjB,IAAI,CAACkB,KAAK,EAAE;IACnB,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAG;MACXH,KAAK,CAACI,IAAI,CAACC,SAAS,CAACF,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAG,QAAQA,CAAA;IACN,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAAChB,aAAa,CAACG,KAAK;IAC7C,IAAI,CAACd,SAAS,CAACyB,QAAQ,CAACC,GAAG,CAAC,CAACE,SAAS,CACpCd,KAAK,IAAG;MACN,IAAI,CAACe,WAAW,CAACf,KAAK,CAAC;IACzB,CAAC,CAEF;EACH;EAEQe,WAAWA,CAACC,KAAW;IAC7B,IAAIA,KAAK,IAAIA,KAAK,CAACC,IAAI,GAAG,CAAC,EAAE;MAC3B,IAAIC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC7BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK,IAAI,CAACC,OAAO,GAAGD,CAAC,CAACE,MAAM,EAAEnB,MAAM;MACtDc,MAAM,CAACM,aAAa,CAACR,KAAK,CAAC;;EAE/B;CACD;AAnDCS,UAAA,EADChD,SAAS,CAAC,YAAY,CAAC,C,+CACD;AAEvBgD,UAAA,EADChD,SAAS,CAAC,UAAU,CAAC,C,6CACD;AAJVM,YAAY,GAAA0C,UAAA,EALxBjD,SAAS,CAAC;EACTkD,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,sBAAsB;EACnCC,SAAS,EAAE,CAAC,qBAAqB;CAClC,CAAC,C,EACW7C,YAAY,CAqDxB;SArDYA,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}