{"ast":null,"code":"import { inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ImageService } from '../image.service';\nimport { firstValueFrom } from 'rxjs';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst _c0 = [\"uploadFile\"];\nclass MainComponent {\n  constructor() {\n    this.fb = inject(FormBuilder);\n    this.imageSvc = inject(ImageService);\n    this.router = inject(Router);\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      title: this.fb.control('', [Validators.required]),\n      file: this.fb.control(null, [Validators.required])\n    });\n  }\n  upload() {\n    const f = this.uploadFile.nativeElement.files[0];\n    const data = this.form.value;\n    console.info('data: ', data);\n    console.info('file: ', f);\n    // Promise\n    firstValueFrom(this.imageSvc.upload(data['title'], f)).then(result => {\n      alert('uploaded');\n      this.form.reset();\n    }).catch(err => {\n      alert(JSON.stringify(err));\n    });\n    this.router.navigate(['/list']);\n  }\n}\nMainComponent.ɵfac = function MainComponent_Factory(t) {\n  return new (t || MainComponent)();\n};\nMainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MainComponent,\n  selectors: [[\"app-main\"]],\n  viewQuery: function MainComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.uploadFile = _t.first);\n    }\n  },\n  decls: 20,\n  vars: 2,\n  consts: [[3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"size\", \"30\", \"formControlName\", \"title\"], [\"type\", \"file\", \"formControlName\", \"file\"], [\"uploadFile\", \"\"], [\"type\", \"submit\", 3, \"disabled\"]],\n  template: function MainComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Upload\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function MainComponent_Template_form_submit_2_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵelementStart(3, \"table\")(4, \"tr\")(5, \"td\");\n      i0.ɵɵtext(6, \"Title:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"td\");\n      i0.ɵɵelement(8, \"input\", 1);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"tr\")(10, \"td\");\n      i0.ɵɵtext(11, \"File:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"td\");\n      i0.ɵɵelement(13, \"input\", 2, 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"tr\");\n      i0.ɵɵelement(16, \"td\");\n      i0.ɵɵelementStart(17, \"td\")(18, \"button\", 4);\n      i0.ɵɵtext(19, \"Upload\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { MainComponent };","map":{"version":3,"names":["inject","FormBuilder","Validators","ImageService","firstValueFrom","Router","MainComponent","constructor","fb","imageSvc","router","ngOnInit","form","group","title","control","required","file","upload","f","uploadFile","nativeElement","files","data","value","console","info","then","result","alert","reset","catch","err","JSON","stringify","navigate","selectors","viewQuery","MainComponent_Query","rf","ctx","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","MainComponent_Template_form_submit_2_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","invalid"],"sources":["C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\components\\main.component.ts","C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\components\\main.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ImageService } from '../image.service';\nimport { firstValueFrom } from 'rxjs';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-main',\n  templateUrl: './main.component.html',\n  styleUrls: ['./main.component.css']\n})\nexport class MainComponent implements OnInit {\n  @ViewChild('uploadFile')\n  uploadFile!: ElementRef\n\n  form!: FormGroup\n  fb = inject(FormBuilder)\n  imageSvc = inject(ImageService)\n  router = inject(Router)\n\n  ngOnInit(): void {\n      this.form = this.fb.group({\n        title: this.fb.control<string>('', [Validators.required]),\n        file: this.fb.control<File | null>(null, [Validators.required])\n      })\n  }\n\n  upload() {\n    const f: File = this.uploadFile.nativeElement.files[0]\n    const data = this.form.value\n    console.info('data: ', data)\n    console.info('file: ', f)\n\n    // Promise\n    firstValueFrom(this.imageSvc.upload(data['title'], f))\n    .then(result => {\n      alert('uploaded')\n      this.form.reset()\n    })\n    .catch(err => {\n      alert(JSON.stringify(err))\n    })\n\n    this.router.navigate(['/list'])\n  }\n\n\n\n}\n","<h1>Upload</h1>\n\n<form [formGroup]=\"form\" (submit)=\"upload()\">\n  <table>\n    <tr>\n      <td>Title:</td>\n      <td>\n        <input type=\"text\" size=\"30\" formControlName=\"title\">\n      </td>\n    </tr>\n    <tr>\n      <td>File:</td>\n      <td>\n        <input type=\"file\" formControlName=\"file\" #uploadFile>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        <button type=\"submit\" [disabled]=\"form.invalid\">Upload</button>\n      </td>\n    </tr>\n  </table>\n</form>\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}