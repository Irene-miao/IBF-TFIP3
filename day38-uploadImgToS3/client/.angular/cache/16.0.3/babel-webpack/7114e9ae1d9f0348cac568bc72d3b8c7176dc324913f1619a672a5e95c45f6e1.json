{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { firstValueFrom } from 'rxjs';\nlet AppComponent = class AppComponent {\n  constructor() {\n    this.fb = inject(FormBuilder);\n    this.uploadSvc = inject(UploadService);\n  }\n  ngOnInit() {\n    this.form = this.fb.group({\n      title: this.fb.control('', [Validators.required]),\n      file: this.fb.control(null, [Validators.required])\n    });\n  }\n  upload() {\n    const f = this.uploadFile.nativeElement.files[0];\n    const data = this.form.value;\n    console.info('data: ', data);\n    console.info('file: ', f);\n    firstValueFrom(this.uploadSvc.upload(data['title'], f)).then(result => {\n      alert('uploaded');\n      this.form.reset();\n    }).catch(err => {\n      alert(JSON.stringify(err));\n    });\n  }\n  getImage() {\n    const key = this.imagePath.nativeElement.value;\n    this.image$ = this.uploadSvc.getImage(path);\n  }\n};\n__decorate([ViewChild('uploadFile')], AppComponent.prototype, \"uploadFile\", void 0);\n__decorate([ViewChild('imagePath')], AppComponent.prototype, \"imageKey\", void 0);\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})], AppComponent);\nexport { AppComponent };","map":{"version":3,"names":["Component","ViewChild","inject","FormBuilder","Validators","UploadService","firstValueFrom","AppComponent","constructor","fb","uploadSvc","ngOnInit","form","group","title","control","required","file","upload","f","uploadFile","nativeElement","files","data","value","console","info","then","result","alert","reset","catch","err","JSON","stringify","getImage","key","imagePath","image$","path","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\super\\OneDrive\\Desktop\\day38\\client\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild, inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { UploadService } from './upload.service';\nimport { Observable, firstValueFrom } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  @ViewChild('uploadFile')\n  uploadFile!: ElementRef\n  @ViewChild('imagePath')\n  imageKey!: ElementRef\n\n\n  image$!: Observable<any>\n  form!: FormGroup\n  fb = inject(FormBuilder)\n  uploadSvc = inject(UploadService)\n\n  ngOnInit(): void {\n      this.form = this.fb.group({\n        title: this.fb.control<string>('', [Validators.required]),\n        file: this.fb.control<File | null>(null, [Validators.required])\n      })\n  }\n\n  upload() {\n    const f: File = this.uploadFile.nativeElement.files[0]\n    const data = this.form.value\n    console.info('data: ', data)\n    console.info('file: ', f)\n\n    firstValueFrom(this.uploadSvc.upload(data['title'], f))\n    .then(result => {\n      alert('uploaded')\n      this.form.reset()\n    })\n    .catch(err => {\n      alert(JSON.stringify(err))\n    })\n  }\n\n  getImage() {\n    const key = this.imagePath.nativeElement.value\n    this.image$ = this.uploadSvc.getImage(path);\n\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAsBC,SAAS,EAAEC,MAAM,QAAQ,eAAe;AAChF,SAASC,WAAW,EAAaC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAAqBC,cAAc,QAAQ,MAAM;AAOjD,IAAaC,YAAY,GAAzB,MAAaA,YAAY;EAAzBC,YAAA;IASE,KAAAC,EAAE,GAAGP,MAAM,CAACC,WAAW,CAAC;IACxB,KAAAO,SAAS,GAAGR,MAAM,CAACG,aAAa,CAAC;EA8BnC;EA5BEM,QAAQA,CAAA;IACJ,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,IAAI,CAACL,EAAE,CAACM,OAAO,CAAS,EAAE,EAAE,CAACX,UAAU,CAACY,QAAQ,CAAC,CAAC;MACzDC,IAAI,EAAE,IAAI,CAACR,EAAE,CAACM,OAAO,CAAc,IAAI,EAAE,CAACX,UAAU,CAACY,QAAQ,CAAC;KAC/D,CAAC;EACN;EAEAE,MAAMA,CAAA;IACJ,MAAMC,CAAC,GAAS,IAAI,CAACC,UAAU,CAACC,aAAa,CAACC,KAAK,CAAC,CAAC,CAAC;IACtD,MAAMC,IAAI,GAAG,IAAI,CAACX,IAAI,CAACY,KAAK;IAC5BC,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEH,IAAI,CAAC;IAC5BE,OAAO,CAACC,IAAI,CAAC,QAAQ,EAAEP,CAAC,CAAC;IAEzBb,cAAc,CAAC,IAAI,CAACI,SAAS,CAACQ,MAAM,CAACK,IAAI,CAAC,OAAO,CAAC,EAAEJ,CAAC,CAAC,CAAC,CACtDQ,IAAI,CAACC,MAAM,IAAG;MACbC,KAAK,CAAC,UAAU,CAAC;MACjB,IAAI,CAACjB,IAAI,CAACkB,KAAK,EAAE;IACnB,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAG;MACXH,KAAK,CAACI,IAAI,CAACC,SAAS,CAACF,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAG,QAAQA,CAAA;IACN,MAAMC,GAAG,GAAG,IAAI,CAACC,SAAS,CAAChB,aAAa,CAACG,KAAK;IAC9C,IAAI,CAACc,MAAM,GAAG,IAAI,CAAC5B,SAAS,CAACyB,QAAQ,CAACI,IAAI,CAAC;EAE7C;CACD;AAtCCC,UAAA,EADCvC,SAAS,CAAC,YAAY,CAAC,C,+CACD;AAEvBuC,UAAA,EADCvC,SAAS,CAAC,WAAW,CAAC,C,6CACF;AAJVM,YAAY,GAAAiC,UAAA,EALxBxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,sBAAsB;EACnCC,SAAS,EAAE,CAAC,qBAAqB;CAClC,CAAC,C,EACWpC,YAAY,CAwCxB;SAxCYA,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}